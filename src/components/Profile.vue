<template>
  <Pill class="mx-4 mt-2" color="dark" ripple @click="$router.push('/profile')">
    <div class="content flex gap-4 items-center">
      <img :src="getAsset('avatar1')" />
      <div class="profile-meta flex flex-col flex-1">
        <div class="profile-start flex items-center justify-between">
          <span class="text-xl font-bold fira-condensed-bold">{{ userName || "Unknown Tiger" }}</span>
          <div class="energy flex gap-1 items-center">
            <img class="h-4" :src="getAsset('energy')" />
            <span class="text-md exo-bold">{{ battles["energy"] }}</span>
          </div>
        </div>
        <div class="money flex gap-2 items-center">
          <div class="bolts flex gap-1 items-center">
            <img class="h-4" :src="getAsset('bolt')" />

            <span class="text-md exo-black text-xl leading-3 text-[var(--accent-color)]">{{ data["bolts"] }}</span>
            <!-- <span class="text-md exo-black text-xl leading-3 text-[var(--accent-color)]">120,000</span> -->
          </div>
          <svg width="79" height="27" viewBox="0 0 79 27" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g filter="url(#filter0_b_223_2510)">
              <rect width="79" height="27" rx="13.5" fill="url(#paint0_linear_223_2510)" />
              <rect x="0.25" y="0.25" width="78.5" height="26.5" rx="13.25" stroke="url(#paint1_linear_223_2510)" stroke-width="0.5" />
            </g>
            <circle cx="15.5" cy="13.5" r="8.5" fill="#FEAC3E" />
            <path d="M15.25 9.5V18" stroke="#222222" stroke-width="2" stroke-linecap="round" />
            <path d="M19.5 13.75L11 13.75" stroke="#222222" stroke-width="2" stroke-linecap="round" />
            <path
              d="M34.092 9.624C34.844 9.624 35.44 9.688 35.88 9.816C36.328 9.936 36.648 10.152 36.84 10.464C37.032 10.776 37.128 11.216 37.128 11.784C37.128 12.376 37.012 12.828 36.78 13.14C36.556 13.444 36.176 13.62 35.64 13.668V13.74C36.296 13.796 36.752 14.012 37.008 14.388C37.272 14.756 37.404 15.272 37.404 15.936C37.404 16.504 37.3 16.944 37.092 17.256C36.892 17.568 36.576 17.788 36.144 17.916C35.72 18.036 35.168 18.096 34.488 18.096C33.92 18.096 33.42 18.092 32.988 18.084C32.564 18.084 32.172 18.076 31.812 18.06C31.46 18.044 31.096 18.024 30.72 18L30.9 16.488C31.108 16.496 31.496 16.504 32.064 16.512C32.64 16.52 33.312 16.524 34.08 16.524C34.368 16.524 34.588 16.5 34.74 16.452C34.9 16.396 35.008 16.292 35.064 16.14C35.128 15.988 35.16 15.772 35.16 15.492C35.16 15.196 35.128 14.968 35.064 14.808C35 14.648 34.888 14.54 34.728 14.484C34.576 14.42 34.352 14.388 34.056 14.388H30.888V13.032H34.032C34.28 13.032 34.472 13.008 34.608 12.96C34.744 12.912 34.84 12.82 34.896 12.684C34.952 12.548 34.98 12.352 34.98 12.096C34.98 11.848 34.952 11.66 34.896 11.532C34.84 11.404 34.74 11.316 34.596 11.268C34.452 11.22 34.248 11.196 33.984 11.196C33.504 11.196 33.084 11.196 32.724 11.196C32.364 11.188 32.036 11.188 31.74 11.196C31.452 11.196 31.172 11.208 30.9 11.232L30.72 9.72C31.064 9.688 31.396 9.668 31.716 9.66C32.036 9.644 32.388 9.636 32.772 9.636C33.156 9.628 33.596 9.624 34.092 9.624ZM32.916 9.72V18H30.72V9.72H32.916ZM42.0044 9.552C42.6924 9.552 43.2724 9.62 43.7444 9.756C44.2164 9.892 44.6004 10.124 44.8964 10.452C45.1924 10.772 45.4044 11.208 45.5324 11.76C45.6604 12.312 45.7244 13.012 45.7244 13.86C45.7244 14.7 45.6604 15.4 45.5324 15.96C45.4044 16.512 45.1924 16.952 44.8964 17.28C44.6004 17.6 44.2164 17.828 43.7444 17.964C43.2724 18.1 42.6924 18.168 42.0044 18.168C41.3244 18.168 40.7444 18.1 40.2644 17.964C39.7924 17.828 39.4084 17.6 39.1124 17.28C38.8164 16.952 38.6044 16.512 38.4764 15.96C38.3484 15.4 38.2844 14.7 38.2844 13.86C38.2844 13.012 38.3484 12.312 38.4764 11.76C38.6044 11.208 38.8164 10.772 39.1124 10.452C39.4084 10.124 39.7924 9.892 40.2644 9.756C40.7444 9.62 41.3244 9.552 42.0044 9.552ZM42.0044 11.268C41.6524 11.268 41.3764 11.34 41.1764 11.484C40.9844 11.628 40.8484 11.888 40.7684 12.264C40.6884 12.64 40.6484 13.172 40.6484 13.86C40.6484 14.548 40.6884 15.08 40.7684 15.456C40.8484 15.832 40.9844 16.092 41.1764 16.236C41.3764 16.38 41.6524 16.452 42.0044 16.452C42.3564 16.452 42.6284 16.38 42.8204 16.236C43.0204 16.092 43.1564 15.832 43.2284 15.456C43.3084 15.08 43.3484 14.548 43.3484 13.86C43.3484 13.172 43.3084 12.64 43.2284 12.264C43.1564 11.888 43.0204 11.628 42.8204 11.484C42.6284 11.34 42.3564 11.268 42.0044 11.268ZM50.3833 9.552C51.0713 9.552 51.6513 9.62 52.1233 9.756C52.5953 9.892 52.9793 10.124 53.2753 10.452C53.5713 10.772 53.7833 11.208 53.9113 11.76C54.0393 12.312 54.1033 13.012 54.1033 13.86C54.1033 14.7 54.0393 15.4 53.9113 15.96C53.7833 16.512 53.5713 16.952 53.2753 17.28C52.9793 17.6 52.5953 17.828 52.1233 17.964C51.6513 18.1 51.0713 18.168 50.3833 18.168C49.7033 18.168 49.1233 18.1 48.6433 17.964C48.1713 17.828 47.7873 17.6 47.4913 17.28C47.1953 16.952 46.9833 16.512 46.8553 15.96C46.7273 15.4 46.6633 14.7 46.6633 13.86C46.6633 13.012 46.7273 12.312 46.8553 11.76C46.9833 11.208 47.1953 10.772 47.4913 10.452C47.7873 10.124 48.1713 9.892 48.6433 9.756C49.1233 9.62 49.7033 9.552 50.3833 9.552ZM50.3833 11.268C50.0313 11.268 49.7553 11.34 49.5553 11.484C49.3633 11.628 49.2273 11.888 49.1473 12.264C49.0673 12.64 49.0273 13.172 49.0273 13.86C49.0273 14.548 49.0673 15.08 49.1473 15.456C49.2273 15.832 49.3633 16.092 49.5553 16.236C49.7553 16.38 50.0313 16.452 50.3833 16.452C50.7353 16.452 51.0073 16.38 51.1993 16.236C51.3993 16.092 51.5353 15.832 51.6073 15.456C51.6873 15.08 51.7273 14.548 51.7273 13.86C51.7273 13.172 51.6873 12.64 51.6073 12.264C51.5353 11.888 51.3993 11.628 51.1993 11.484C51.0073 11.34 50.7353 11.268 50.3833 11.268ZM58.2462 9.552C58.6702 9.56 59.1382 9.588 59.6502 9.636C60.1622 9.684 60.6582 9.784 61.1382 9.936L60.9942 11.4C60.6422 11.392 60.2102 11.384 59.6982 11.376C59.1942 11.368 58.6982 11.364 58.2102 11.364C58.0262 11.364 57.8702 11.372 57.7422 11.388C57.6222 11.396 57.5222 11.42 57.4422 11.46C57.3702 11.492 57.3182 11.544 57.2862 11.616C57.2542 11.68 57.2382 11.772 57.2382 11.892C57.2382 12.084 57.2942 12.232 57.4062 12.336C57.5262 12.432 57.7342 12.532 58.0302 12.636L59.5782 13.212C60.2502 13.476 60.7182 13.804 60.9822 14.196C61.2542 14.58 61.3902 15.08 61.3902 15.696C61.3902 16.16 61.3342 16.552 61.2222 16.872C61.1102 17.192 60.9262 17.444 60.6702 17.628C60.4222 17.812 60.0902 17.948 59.6742 18.036C59.2662 18.124 58.7582 18.168 58.1502 18.168C57.8702 18.168 57.4582 18.148 56.9142 18.108C56.3782 18.068 55.7702 17.964 55.0902 17.796L55.2222 16.212C55.7022 16.22 56.1262 16.232 56.4942 16.248C56.8702 16.256 57.1942 16.264 57.4662 16.272C57.7462 16.272 57.9662 16.272 58.1262 16.272C58.3982 16.272 58.6062 16.26 58.7502 16.236C58.8942 16.204 58.9942 16.152 59.0502 16.08C59.1062 16 59.1342 15.888 59.1342 15.744C59.1342 15.608 59.1142 15.5 59.0742 15.42C59.0342 15.34 58.9622 15.272 58.8582 15.216C58.7622 15.16 58.6302 15.104 58.4622 15.048L56.8062 14.388C56.1502 14.116 55.6862 13.792 55.4142 13.416C55.1422 13.04 55.0062 12.548 55.0062 11.94C55.0062 11.46 55.0662 11.068 55.1862 10.764C55.3062 10.46 55.4902 10.22 55.7382 10.044C55.9942 9.868 56.3302 9.744 56.7462 9.672C57.1622 9.592 57.6622 9.552 58.2462 9.552ZM66.5698 9.72V18H64.3138V9.72H66.5698ZM68.9578 9.72V11.436H61.9138V9.72H68.9578Z"
              fill="white"
            />
            <defs>
              <filter id="filter0_b_223_2510" x="-20" y="-20" width="119" height="67" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                <feFlood flood-opacity="0" result="BackgroundImageFix" />
                <feGaussianBlur in="BackgroundImageFix" stdDeviation="10" />
                <feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_223_2510" />
                <feBlend mode="normal" in="SourceGraphic" in2="effect1_backgroundBlur_223_2510" result="shape" />
              </filter>
              <linearGradient id="paint0_linear_223_2510" x1="39.5" y1="0" x2="39.5" y2="27" gradientUnits="userSpaceOnUse">
                <stop stop-color="#4A4A4A" stop-opacity="0.5" />
                <stop offset="1" stop-color="#4A4A4A" stop-opacity="0.2" />
              </linearGradient>
              <linearGradient id="paint1_linear_223_2510" x1="40.1475" y1="1.64047e-06" x2="44.9676" y2="27.1787" gradientUnits="userSpaceOnUse">
                <stop stop-color="white" stop-opacity="0.5" />
                <stop offset="1" stop-color="#999999" stop-opacity="0.05" />
              </linearGradient>
            </defs>
          </svg>
        </div>
      </div>
    </div>
  </Pill>
</template>

<script setup lang="ts">
import { storeToRefs } from "pinia";
import { getUserName, userName } from "@/api/telegram";
import { getAsset } from "@/utils";

// stores
import { useDataStore } from "@/store/data.ts";
import { useLocaleStore } from "@/store/locale.ts";

// components
import Pill from "@/components/UI/Pill.vue";

const dataStore = useDataStore();
const localeStore = useLocaleStore();

const { profile: data, battles } = storeToRefs(dataStore);
const { profile: locale } = storeToRefs(localeStore);
</script>
